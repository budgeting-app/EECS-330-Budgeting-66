mw.hook('wikipage.content').add(function($content){'use strict';var $adminList=$content.find('#admin-list');if(!$adminList.length){return;}$.getJSON(mw.util.wikiScript('api'),{action:'query',list:'groupmembers',gmgroups:'sysop',format:'json'},function(data){if(!data.error){var el=$('<ul>');data.users.forEach(function(u){el.append($('<li>').append($('<a>',{href:mw.util.getUrl('User:'+u.name)}).text(u.name)));});$adminList.html(el);}});});;mw.loader.using('mediawiki.api',function(){if(mw.config.get('wgCanonicalSpecialPageName')!="Wantedfiles")return;$('.mw-spcontent').find('p').first().append('<br/><a class="wds-button wds-is-squished" style="cursor:pointer" id="clean-button">Clean Files</a><br/><div id="text-error-output" style="height:10em; width: 80%; margin: 5px auto 0px auto; color: #000; background-color: #ffbfbf; height: 150px; border: 1px solid black; font-weight: bold; overflow: scroll">Any errors encountered will appear below<br/></div>');$('#clean-button').click(function(){$(
'.special > li').each(function(){var page=$(this).children('a').first().text();new mw.Api().get({action:'query',list:'imageusage',iutitle:page,iulimit:5000}).done(function(d){if(!d.error){var data=d.query;for(var i in data.imageusage){if(data.imageusage[i].title){cleanPage(data.imageusage[i].title,page);}else{$('#text-error-output').append('No usage found for '+page+'!<br/>');return;}}}else{console.log('Failed to get image usage for '+page+' : '+d.error.code);$('#text-error-output').append('Failed to get image usage for '+page+' : '+d.error.code+'<br/>');}}).fail(function(){console.log('Failed to get image usage for '+page+'!');$('#text-error-output').append('Failed to get image usage for '+page+'!<br/>');});});});function cleanPage(title,oldFile){new mw.Api().get({action:'query',prop:'revisions',rvprop:'content',titles:title}).done(function(d){if(!d.error){for(var i in d.query.pages){if(d.query.pages[i].revisions){var content=d.query.pages[i].revisions[0]["*"];}else{$(
'#text-error-output').append('Page '+title+' does not exist!<br/>');return;}}if(/#REDIRECT/gi.test(content)){$('#text-error-output').append('Page '+title+' is a redirect and has been skipped.');return;}oldFile=oldFile.split(':')[1];var underscoreOldFile=oldFile.replace(' ','_'),fileRegex=new RegExp("\\[\\[(File|Image):_?.*?"+oldFile+"\\|?.*?\\]\\]","gi"),underscoreFileRegex=new RegExp("\\[\\[(File|Image):_?.*?"+underscoreOldFile+"\\|?.*?\\]\\]","gi"),changedContent=content.replace(fileRegex,'').replace(underscoreFileRegex,'');if(changedContent.valueOf()==content.valueOf()){$('#text-error-output').append(oldFile+' was not found on '+title+'!<br/>');return;}var config={format:'json',action:'edit',watchlist:'nochange',title:title,summary:'Removing defunct file (automatic)',nocreate:'',text:changedContent,bot:!0,token:mw.user.tokens.get('editToken')};if(mw.config.get("wgUserGroups").join(' ').indexOf('bot')==-1)delete config.bot;$.ajax({url:mw.util.wikiScript('api'),data:config,dataType:
'json',type:'POST',success:function(d){if(!d.error){console.log('File successfully removed from '+title+'!');}else{console.log('Failed to remove file from '+title+': '+d.error.code);$('#text-error-output').append('Failed to remove file from '+title+': '+d.error.code+'<br/>');}},error:function(){console.log('Failed to remove file from '+title+'!');$('#text-error-output').append('Failed to remove file from '+title+'!<br/>');}});}else{console.log('Failed to get contents for '+title+' : '+d.error.code);$('#text-error-output').append('Failed to get contents for '+title+' : '+d.error.code+'<br/>');}}).fail(function(){console.log('Failed to get contents for '+title+'!');$('#text-error-output').append('Failed to get contents for '+title+'!<br/>');});}});;mw.loader.using('mediawiki.api').then(function(){if(typeof dev=='undefined'||typeof dev.i18n=='undefined'){importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});}function revealContent($el){$el.removeClass('hide');var id=$el
.attr('data-id'),relativeid=$el.attr('id'),Api=new mw.Api();if(!id)return;Api.get({action:'query',prop:'revisions',rvprop:'timestamp|user',rvdir:'newer',rvlimit:'max',pageids:id}).done(function(ts){if(!ts||!ts.query||ts.error)return;var revs=ts.query.pages[id].revisions,rev=revs[0],last_rev=ts.query.pages[id].revisions[revs.length-1],name=rev.user,time=last_rev.timestamp,d=new Date(time),readableTime=d.getHours()+d.getTimezoneOffset()/60+':'+d.getMinutes()+', '+wgMonthNames[d.getMonth()+1]+' '+d.getDate()+', '+d.getFullYear();$.get('/api/v1/User/Details',{ids:name,size:50}).always(function(avi){if(avi.status==404){avi='https://images.wikia.nocookie.net/messaging/images/thumb/1/19/Avatar.jpg/50px-Avatar.jpg';}else{avi=avi.items[0].avatar;}Api.get({action:'parse',pageid:id}).done(function(d){var html=d.parse.text['*'],$avatar=$('<div>',{class:'speech-bubble-avatar'}).append($('<a>',{href:wgArticlePath.replace('$1','Message_Wall:'+name),append:$('<img>',{src:avi,width:'30',height:'30',
class:'avatar',alt:name})})),$msg=$('<div>',{class:'speech-bubble-message'}).append($('<div>',{class:'MiniEditorWrapper','data-min-height':'100','data-max-height':'400',append:[$('<div>',{class:'edited-by',append:[$('<a>',{text:name,href:wgArticlePath.replace('$1','Message_Wall:'+name)}),$('<a>',{class:'subtle',href:wgArticlePath.replace('$1','Message_Wall:'+name)})]}),$('<div>',{class:'editarea','data-space-type':'editarea',append:[$('<div>',{class:'msg-body',id:'WallMessage_'+id,html:html}),$('<div>',{class:'loading-indicator','data-space-type':'loading-status',append:[$('<div>',{class:'loading-background'}),$('<div>',{class:'loading-message',append:[$('<span>',{class:'loading-throbber',html:'&nbsp;'}),$('<span>',{class:'loading-text',html:'Loading editor'})]})]})]}),$('<div>',{class:'toolbar','data-space-type':'toolbar'}),$('<div>',{class:'msg-toolbar',append:[$('<div>',{class:'timestamp',append:$('<a>',{class:'permalink',tabindex:'-1',href:'#'+relativeid,append:[$('<span>',{class:
'timeago abstimeago',title:time,alt:readableTime,each:function(){$(this).timeago();}}),$('<span>',{class:'timeago-fmt',text:readableTime})]})})]})]}));$el.append($avatar,$msg);});});});}mw.hook('dev.i18n').add(function(devi18n){devi18n.loadMessages('ViewRemoved').done(function(i18n){i18n.useUserLang();$('.message-removed').each(function(){var $el=$(this);if(window.ViewRemovedAlways||!$el.hasClass('hide')){revealContent($el);return;}$el.find('.speech-bubble-message-removed').append('(',$('<a>',{text:i18n.msg('see-message').escape(),click:function(){revealContent($el);}}).css('cursor','pointer'),')');});});});});;(function(window,$,mw){'use strict';var config=mw.config.get(['wgAction','wgNamespaceNumber','wgTitle','wgUserGroups','wgUserName']),groups=config.wgUserGroups.join(' ');if(config.wgNamespaceNumber===1202){$('#ca-talk').remove();return;}else if(config.wgTitle.indexOf('/')!==-1||config.wgNamespaceNumber!==1200||!(config.wgUserName===config.wgTitle||
/sysop|threadmoderator|vstf|helper|staff/.test(groups))||config.wgAction!=='edit'||window.WallGreetingButtonLoaded){return;}window.WallGreetingButtonLoaded=!0;function init(i18n){i18n.useUserLang();var params={url:new mw.Title(config.wgTitle,1202).getUrl(),wallUrl:new mw.Title(config.wgTitle,1200).getUrl()};['editGreeting','history','wallHistory','delete','protect','raw'].forEach(function(el){params[el]=i18n.msg(el).plain();});$('#WikiaMainContentContainer').prepend(window.Mustache.render('<div class="page-header" id="PageHeader" style="padding: 0;">'+'<div class="UserProfileActionButton" id="EditMessageWallGreeting">'+'<div class="wds-button-group" id="ca-edit" style="text-align: left;">'+'<a accesskey="e" href="{{url}}?action=edit" class="wds-is-squished wds-button">'+'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" class="wds-icon wds-icon-small" id="wds-icons-pencil-small">'+
'<path d="M9.1 4.5l-7.8 7.8c-.2.2-.3.4-.3.7v3c0 .6.4 1 1 1h3c.3 0 .5-.1.7-.3l7.8-7.8-4.4-4.4zm7.6-.2l-3-3c-.4-.4-1-.4-1.4 0l-1.8 1.8 4.4 4.4 1.8-1.8c.4-.4.4-1 0-1.4z" fill-rule="evenodd"></path>'+'</svg>'+'<span>{{editGreeting}}</span>'+'</a>'+'<div class="wds-dropdown">'+'<div class="wds-button wds-is-squished wds-dropdown__toggle">'+'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" class="wds-icon wds-icon-tiny wds-dropdown__toggle-chevron" id="wds-icons-dropdown-tiny">'+'<path d="M6 9l4-5H2" fill-rule="evenodd"></path>'+'</svg>'+'</div>'+'<div class="wds-dropdown__content wds-is-not-scrollable wds-is-right-aligned" style="z-index: 2;">'+'<ul class="wds-list wds-is-linked">'+'<li><a id="ca-history" href="{{url}}?action=history">{{history}}</a></li>'+'<li><a accesskey="h" href="{{wallUrl}}?action=history">{{wallHistory}}</a></li>'+(/sysop|content-moderator|vstf|helper|staff/.test(groups)?
'<li><a id="ca-delete" href="{{url}}?action=delete">{{delete}}</a></li>'+(window.WallGreetingButtonProtect?'<li><a id="ca-protect" href="{{url}}?action=protect">{{protect}}</a></li>':''):'')+(window.WallGreetingButtonRaw?'<li><a id="ca-raw" href="{{url}}?action=raw">{{raw}}</a></li>':'')+'</ul>'+'</div>'+'</div>'+'</div>'+'</div>'+'</div>',params));}importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});mw.hook('dev.i18n').add(function(i18no){$.when(i18no.loadMessages('WallGreetingButton'),mw.loader.using(['mediawiki.Title','wikia.mustache'])).then(init);});})(window,jQuery,mediaWiki);;(function($,mw){'use strict';var conf=mw.config.get(['debug','wgAction','wgCanonicalSpecialPageName','wgNamespaceNumber','wgTitle','wgUserName']),noHideTags=!!((window.dev||{}).profileTags||{}).noHideTags;function hideTags($masthead){var $tags=$masthead.find('.tag');$tags.hide();}function getTagClass(tag){var tagClass='tag-'+tag.toLowerCase().replace(/\s/g,'_');return tagClass;}function
getLinkTag($span,tag){var re=/\[\[(.+?)\|(.+?)\]\]/,match=re.exec(tag),href=mw.util.wikiGetlink(match[1]),text=match[2],$a=$('<a>').attr('href',href).css('color','inherit').text(text);$span.addClass(getTagClass(tag)).append($a);return $span;}function addProfileTags(tags){var $masthead=$('.UserProfileMasthead hgroup'),linkTestRe=/\[\[.+?\|.+?\]\]/;if(!noHideTags){hideTags($masthead);}tags.forEach(function(tag){var $span=$('<span>').addClass('tag');if(linkTestRe.test(tag)){$span=getLinkTag($span,tag);}else{$span.addClass(getTagClass(tag)).text(tag);}$masthead.append($span,' ');});mw.hook('dev.profile-tags').fire();}function getUserName(){var user=conf.wgTitle,target=$.getUrlVar('target'),parts;if(conf.wgCanonicalSpecialPageName==='Contributions'){parts=user.split('/');if(parts.length===2){user=parts[1];}else if(target){user=decodeURIComponent(target).replace(/_/g,' ');}else{user=conf.wgUserName;if(user===null){user='';}}}return user;}function getUserTags(){var params={action:'raw',title:
'MediaWiki:ProfileTags'};if(conf.debug){params.maxage=0;params.smaxage=0;}$.get(mw.util.wikiScript(),params,function(data){if(!data.length){return;}var user=$.escapeRE(getUserName()),re=new RegExp('(?:^|\\n)\\s*'+user+'\\s*\\|\\s*(.*?)\\s*(?:\\n|$)'),match=re.exec(data),tags;if(match===null){return;}tags=match[1].split(/\s*,\s*/);if(tags.length){addProfileTags(tags);}});}function init(){if($('.UserProfileMasthead').length){mw.loader.using(['mediawiki.util','site'],getUserTags);}}$(init);}(jQuery,mediaWiki));;require(['jquery','mw'],function($,mw){var storageKey='ls-wikianotifications';function log(error){console.log('WikiaNotifications error: '+error);}function getNotificationData(){return(new mw.Api()).get({action:'parse',disablepp:'',page:'MediaWiki:Custom-WikiaNotifications',format:'json'}).then(function(res){var dfd=$.Deferred();if(res.error){return dfd.rejectWith(this,[res.error.info]);}var text=res.parse.text['*'].trim();text=(text||'').replace(/<script>[\s\S]*?<\/script>/igm,'')
.replace(/<!\-\-[\s\S]*?\-\->/igm,'');if(!text.length||!text.trim().length){return dfd.rejectWith(this,['empty content']);}return dfd.resolveWith(this,[{version:res.parse.revid,contents:text}]);});}function showNotificationIfNotViewed(notification){var notifsData=JSON.parse(window.localStorage.getItem(storageKey))||{},hasSeen=(notifsData[mw.config.get('wgCityId')]===notification.version),$notificationArea=$('#WikiaNotifications'),hasNotifications=$notificationArea.length?1:0;if(hasSeen){return;}var $notif=$('<li/>').attr('class','custom').append($('<div>').attr('data-type','2').html(notification.contents).append($('<a>').addClass('sprite close-notification')));if(hasNotifications){$notificationArea.append($notif);}else{$('body').addClass('notifications').append($('<ul id="WikiaNotifications" class="WikiaNotifications"></ul>').append($notif));}$('.sprite.close-notification').on('click',function(){$notif.hide();notifsData[mw.config.get('wgCityId')]=notification.version;window.
localStorage.setItem(storageKey,JSON.stringify(notifsData));});}mw.loader.using('mediawiki.api',function(){if(mw.config.get('wgUserName')){$(function(){getNotificationData().then(showNotificationIfNotViewed).fail(log);});}});});;(function(){var config=window.UserStatusSettings||{},colorBlindMode=config.colorBlindMode||1,lightTheme=config.lightTheme||0,statusIndicator=config.statusIndicator||1,avatar='.UserProfileMasthead .masthead-avatar',$user=mw.config.get('wgTitle').split('/'),Api=new mw.Api();if(!$('.UserProfileMasthead').length){return;}function init(i18n){$.ajax({method:'GET',dataType:'text',url:mw.util.wikiScript('index'),data:{title:wgFormattedNamespaces[2]+':'+($user[1]?$user[1]:$user[0])+'/status',action:'raw'},complete:function(data){var status=['online','away','dnd','offline'].indexOf(data.responseText)===-1?'Unknown':data.responseText;var status_masthead=$('<li>');var status_text={'online':i18n.msg('online').plain(),'away':i18n.msg('away').plain(),'dnd':i18n.msg('dnd').
plain(),'offline':i18n.msg('offline').plain(),'unknown':i18n.msg('unknown').plain()};var status_color={'online':'#43b581','away':'#faa61a','dnd':'#f04747','offline':'#747f8d','unknown':'#747f8d'};var statusOptions={'online':'online','away':'away','dnd':'dnd','offline':'offline','unknown':'unknown'};var statusIcons=lightTheme?{'online':'','away':'https://discordapp.com/assets/32e7318f451e2c45e3a6593d6e8a418a.svg','dnd':'https://discordapp.com/assets/7ae003e6cbc0d361fe3953e3c4ae8cc3.svg','offline':'https://discordapp.com/assets/84bda2ff1eb55a521895c9734de3befb.svg','unknown':'https://discordapp.com/assets/84bda2ff1eb55a521895c9734de3befb.svg'}:{'online':'','away':'https://discordapp.com/assets/2cd083e5b360930c23ca95ab6a6073a0.svg','dnd':'https://discordapp.com/assets/5e6b9355e62148b7f463465fd029ab92.svg','offline':'https://discordapp.com/assets/7026428ff08042eb805e579bd9aea182.svg','unknown':'https://discordapp.com/assets/7026428ff08042eb805e579bd9aea182.svg'};if(statusIndicator){$(
avatar).append($('<div>',{'class':'status-indicator si-is-not-colorblind si-is-not-blocked status-indicator-'+status,'title':status_text[status],css:{height:'40px',position:'absolute',right:'5px',bottom:'5px',width:'40px',borderRadius:'50%',background:status_color[status]||'#747f8d',zIndex:'400'}}));}status_masthead.addClass('status-masthead status-masthead-'+status).text(' '+status_text[status]||' '+i18n.msg('unknown').plain()).prepend($('<span>').addClass('user-status-label').text(i18n.msg('status').plain()));$('.masthead-info > .details > ul').append(status_masthead);console.log('UserStatus: Status for '+($user[1]?$user[1]:$user[0])+':',status_text[status]);if(colorBlindMode){$('.si-is-not-colorblind').remove();if(statusIndicator){$(avatar).append($('<div>',{'class':'status-indicator si-is-colorblind si-is-not-blocked status-indicator-'+status,'title':status_text[status],css:{height:'40px',position:'absolute',right:'5px',bottom:'5px',width:'40px',borderRadius:'50%',background:
status_color[status]||'#747f8d',zIndex:'400'}})).append($('<img>',{'src':statusIcons[status]||'https://discordapp.com/assets/7026428ff08042eb805e579bd9aea182.svg','title':status_text[status]||i18n.msg('unknown').plain(),css:{height:'40px',position:'absolute',right:'5px',bottom:'5px',width:'40px',borderRadius:'50%',zIndex:'600'}}));}}$('.UserProfileMasthead .masthead-avatar img').css('border-radius','50%');}});if(($user[1]?$user[1]:$user[0])!==mw.config.get('wgUserName')){return;}var $statusLink=$('<div />').attr('id','StatusChangeWrapper').append($('<div />').addClass('wds-dropdown').attr('id','StatusChange').append($('<a />').attr('title','Change your status').attr('style','cursor: pointer; margin-top: 10px;').text('Status').attr('id','StatusToggle').addClass('wds-button wds-is-secondary wds-dropdown__toggle').append($(
'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" width="12" height="12" class="wds-icon wds-icon-tiny wds-dropdown-chevron"><path d="M6.003 10.002a.997.997 0 0 1-.707-.293L.293 4.706a1 1 0 1 1 1.414-1.414l4.296 4.295 4.293-4.293A1 1 0 1 1 11.71 4.71l-5 5a.997.997 0 0 1-.707.293" fill-rule="evenodd"></path></svg>')).after($('<div>').addClass('wds-is-not-scrollable wds-dropdown__content wds-is-left-aligned').append($('<ul />').addClass('wds-list wds-is-linked').attr('id','StatusMenu').append($('<li>').append($('<a>').attr('target','_blank').attr('style','cursor: pointer;').attr('id','StatusMenu-online').text(i18n.msg('online').plain())).after($('<li>').append($('<a>').attr('target','_blank').attr('style','cursor: pointer;').attr('id','StatusMenu-away').text(i18n.msg('away').plain()))).after($('<li>').append($('<a>').attr('target','_blank').attr('style','cursor: pointer;').attr('id','StatusMenu-dnd').text(i18n.msg('dnd').plain()))).after($('<li>').append($('<a>').attr('target'
,'_blank').attr('style','cursor: pointer;').attr('id','StatusMenu-unknown').text(i18n.msg('offline').plain()))))))));$('.UserProfileMasthead .masthead-info > .details').append($statusLink);$('body').on('click','a[id^="StatusMenu-"]',function(e){e.preventDefault();var content;switch($(e.target).attr('id')){case'StatusMenu-online':content='online';break;case'StatusMenu-away':content='away';break;case'StatusMenu-dnd':content='dnd';break;case'StatusMenu-offline':content='offline';break;}$.ajax({type:'POST',url:mw.util.wikiScript('api'),dataType:'json',data:{action:'edit',title:wgFormattedNamespaces[2]+':'+wgUserName+'/status',summary:i18n.msg('edit-status').plain(),text:content,format:'json',token:mw.user.tokens.get('editToken')}}).done(function(data){if(data.edit.result==='Success'){new BannerNotification(i18n.msg('success').plain(),'confirm').show();}else{new BannerNotification(i18n.msg('error').plain(),'error').show();}}).fail(function(data){new BannerNotification(i18n.msg('error').
plain(),'error').show();});});}var buttonColor=mw.config.get('wgSassParams')['color-buttons'];mw.util.addCSS('#StatusToggle { color:'+buttonColor+'; border-color:'+buttonColor+'}');mw.hook('dev.i18n').add(function(i18n){i18n.loadMessages('UserStatus').then(init);});importArticles({type:'script',articles:['u:dev:I18n-js/code.js','u:dev:UserStatus/banner.js',]});});;;(function(window,$,mw,Wikia){'use strict';var config=mw.config.get(['stylepath','wgAction','wgCanonicalSpecialPageName','wgPageName','wgUserLanguage']),ajaxIndicator=window.ajaxIndicator||config.stylepath+'/common/images/ajax.gif',ajaxTimer,ajRefresh=window.ajaxRefresh||60000,ajPages=window.ajaxPages||[],ajSpecialPages=window.ajaxSpecialPages||['Recentchanges'],disallowActions=['delete','edit','protect','revisiondelete'],href=location.href.replace(/#[\S]*/,''),i18n;function getMessage(msgKey,globalKey){if(globalKey&&typeof window[globalKey]==='string'){return window[globalKey];}return i18n.msg('ajaxrc-'+msgKey).plain();}
function storage(setTo){if(localStorage.getItem('AjaxRC-refresh')===null){localStorage.setItem('AjaxRC-refresh',true);}if(setTo===true||setTo===false){localStorage.setItem('AjaxRC-refresh',setTo);}return JSON.parse(localStorage.getItem('AjaxRC-refresh'));}function getAppTo(){var $ret;$ret=$('.firstHeading');if($ret.length){return $ret;}$ret=$('.WikiaPage .page-header__main');if($ret.length){return $ret;}return false;}function loadPageData(){var $temp=$('<div>');$temp.load(href+' #mw-content-text',function(){var $newContent=$temp.children('#mw-content-text');if($newContent.length){$('#mw-content-text').replaceWith($newContent);mw.util.$content=$newContent;}ajaxTimer=setTimeout(loadPageData,ajRefresh);});$temp.remove();}function toggleAjaxReload(){if($('#ajaxToggle').prop('checked')){storage(true);loadPageData();}else{storage(false);clearTimeout(ajaxTimer);}}function preloadAJAXRL(){var $appTo=getAppTo(),$checkbox=$('<span>').attr('id','ajaxRefresh').css({'font-size':'xx-small',
'line-height':'100%','margin-left':'5px'}).append($('<label>').attr({id:'ajaxToggleText','for':'ajaxToggle',title:getMessage('refresh-hover','AjaxRCRefreshHoverText')}).text(getMessage('refresh-text','AjaxRCRefreshText')+':').css({'border-bottom':'1px dotted',cursor:'help'}),$('<input>').attr({id:'ajaxToggle',type:'checkbox'}).css('margin-bottom',0),$('<span>').attr('id','ajaxLoadProgress').css('display','none').append($('<img>').attr({alt:getMessage('load-status-alt',false),src:ajaxIndicator}).css({'vertical-align':'baseline',float:'none',border:0}))),$throbber;if($appTo===false){$('#WikiaArticle').prepend($checkbox);}else{$appTo.append($checkbox);}$throbber=$checkbox.find('#ajaxLoadProgress');$(document).ajaxSend(function(_,_2,settings){if(href===settings.url){$throbber.show();}}).ajaxComplete(function(_,_2,settings){var $collapsibleElements=$('#mw-content-text').find('.mw-collapsible'),ajCallAgain=window.ajaxCallAgain||[],i;if(href===settings.url){$throbber.hide();if(
$collapsibleElements.length){$collapsibleElements.makeCollapsible();}if(config.wgCanonicalSpecialPageName==='Recentchanges'){mw.special.recentchanges.init();if($('.mw-recentchanges-table').find('.WikiaDropdown').length){Wikia.RecentChanges.init();}}if(config.wgCanonicalSpecialPageName==='WikiActivity'){window.WikiActivity.init();}for(i=0;i<ajCallAgain.length;i++){if($.isFunction(ajCallAgain[i])){ajCallAgain[i]();}else{console.log('AjaxRC Error: Could not call non-function after reload.');}}mw.hook('wikipage.content').fire($('#mw-content-text'));}});$('#ajaxToggle').attr('checked',storage()).click(toggleAjaxReload);if(storage()){ajaxTimer=setTimeout(loadPageData,ajRefresh);}}function loadMessages(){mw.hook('dev.i18n').add(function(i18no){i18no.loadMessages('AjaxRC').done(function(i18nd){i18n=i18nd;preloadAJAXRL();});});importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});}$(function(){if(!window.AjaxRCLoaded&&(ajPages.indexOf(config.wgPageName)>-1||ajSpecialPages.
indexOf(config.wgCanonicalSpecialPageName)>-1)&&!$('#ajaxToggle').length&&disallowActions.indexOf(config.wgAction)===-1){window.AjaxRCLoaded=!0;if($('#mw-content-text .mw-collapsible').exists()){mw.loader.using('jquery.makeCollapsible',loadMessages);}else{loadMessages();}}});}(this,jQuery,mediaWiki,Wikia));;;(function(window,$,mw){'use strict';var username=mw.config.get('wgUserName');if(window.disableUsernameReplace||!username){return;}window.disableUsernameReplace=!0;var $rail=$('#WikiaRail'),customSelector=window.UsernameReplaceSelector?', '+window.UsernameReplaceSelector:'';function inputUsername($content){$content.find('.InputUsername, .insertusername'+customSelector).text(username);}mw.hook('wikipage.content').add(inputUsername);if($rail.hasClass('loaded')){inputUsername($rail);}else if($rail.exists()){$rail.on('afterLoad.rail',$.proxy(inputUsername,null,$rail));}})(window,jQuery,mediaWiki);;(function(){'use strict';var mconfig=mw.config.get(['wgUserLanguage','wgUserName']);if
(window.DiscordIntegratorLoaded){return;}window.DiscordIntegratorLoaded=!0;var DiscordIntegrator={config:(window.DiscordIntegratorConfig||{}).siderail||{},hook:function(i18n){$.when(i18n.loadMessages('DiscordIntegrator'),mw.loader.using('mediawiki.api')).then($.proxy(this.preload,this));},preload:function(i18n){this.i18n=i18n;mw.hook('wikipage.content').add($.proxy(this.insertToContent,this));this.api=new mw.Api();this.api.get({action:'query',meta:'allmessages',ammessages:['id','title','moduleHeight','theme','width','height','text','logged-in','footer','username'].map(function(el){return'Custom-DiscordIntegrator-config-'+el;}).join('|'),amlang:mconfig.wgUserLanguage,smaxage:300,maxage:300}).done($.proxy(function(d){if(!d.error){d.query.allmessages.forEach(function(el){if(el['*']){this.config[el.name.substring(32)]=el['*'];}},this);this._loading=0;['text','title','footer'].forEach(this.parse,this);if(this._loading===0){this.init();}}},this));},parse:function(msg){if(this.config[msg]){++
this._loading;this.api.get({action:'parse',text:this.config[msg]}).done($.proxy(function(d){if(!d.error){this.config[msg]=d.parse.text['*'];if(--this._loading===0){this.init();}}},this));}},init:function(){if(this.config.id&&$('#WikiaRail').length>0){var clas=$('#WikiaRail').attr('class');if(clas&&clas.split(/\s+/).indexOf('loaded')===-1){$('#WikiaRail').on('afterLoad.rail',$.proxy(this.insertToSiderail,this));}else{this.insertToSiderail();}}},insertToSiderail:function(){var filter=$('#top-right-boxad-wrapper, #top-boxad-wrapper, #NATIVE_TABOOLA_RAIL, .content-review-module').last(),el=$('<div>',{class:'DiscordIntegratorModule rail-module'});if(this.config.title){el.append($('<h2>',{'class':'activity-heading',html:this.config.title}));}if(this.config.text){el.append($('<p>',{id:'DiscordIntegratorModuleText',html:this.config.text}));}el.append(this.generateContent(this.config));if(this.config.footer){el.append($('<p>',{id:'DiscordIntegratorModuleFooter',html:this.config.footer}));}if(
filter.length>0){el.insertAfter(filter);}else{$('#WikiaRail').prepend(el);}if(this.config.moduleHeight){mw.util.addCSS('.DiscordIntegratorModule { height: '+Number(this.config.moduleHeight)+'px; }');}mw.hook('DiscordIntegrator.added').fire(el);},insertToContent:function($content){$content.find('.DiscordIntegrator:not(.loaded)').each($.proxy(function(cabbage,el){el=$(el);el.html(this.generateContent(el.data())).addClass('loaded');},this));},generateContent:function(config){return config.id?((config.loggedIn===true||Boolean(config['logged-in'])===true)&&!mconfig.wgUserName)?this.i18n.msg('login').parse():mw.html.element('iframe',{src:'https://discordapp.com/widget?id='+config.id+'&theme='+(config.theme==='light'?'light':'dark')+'&username='+encodeURIComponent(config.username==='@disabled'?'':config.username==='@function'&&typeof window.DiscordIntegratorGetUsername==='function'?window.DiscordIntegratorGetUsername():config.username||mconfig.wgUserName),width:config.width||'100%',height:
config.height||'400px',allowtransparency:'true',frameborder:'0'}):this.i18n.msg('error').escape();}};mw.hook('dev.i18n').add($.proxy(DiscordIntegrator.hook,DiscordIntegrator));importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});})();;(function(){if(wgNamespaceNumber!=1201||window.RefreshThreadsInit)return;window.RefreshThreadsInit=!0;var config=window.RefreshThreads||{},i18n;config.interval=config.interval||15000;function update_title(count){document.title=document.title.replace(/^\(\d+\) /,'');if(count){document.title='('+count+') '+document.title;}}function add_messages(new_messages){update_title(0);$('.new-reply').before(new_messages);new_messages.hide().fadeIn('slow').find('.timeago').timeago().end().each(function(){window.skin!='monobook'&&WikiaButtons.init($(this));});}function display_view_more(new_messages){var count=new_messages.length,class_name='refresh-threads-view-more-button';if($('.'+class_name+'[data-count="'+count+'"]').length)return;update_title
(count);$('.'+class_name).remove();$('<li>',{class:class_name,'data-count':count,append:$('<a>',{class:class_name+'-link',text:i18n.msg('show-new-message'+(count==1?'':'s'),count).plain(),css:{cursor:'pointer'}})}).click(function(){var $this=$(this);$this.fadeOut(400,function(){$this.remove();add_messages(new_messages);});}).hide().fadeIn().insertBefore('.new-reply');}function query_content(){var uri=new mw.Uri(location.href);uri.query.action='render';$.get(uri.toString(),function(page){var $page=$(page),cur_last_id=$('.SpeechBubble.message').last().attr('id'),new_messages=cur_last_id=='1'?$page.find('.replies').children('.message'):$page.find('#'+cur_last_id).nextUntil('.new-reply');setTimeout(query_content,config.interval);if(!new_messages.length)return;if(config.auto_add){add_messages(new_messages);return;}display_view_more(new_messages);});}importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});mw.hook('dev.i18n').add(function(lib){lib.loadMessages(
'RefreshThreads').done(function(lang){i18n=lang;i18n.useUserLang();setTimeout(query_content,config.interval);});mw.util.addCSS('.refresh-threads-view-more-button {\
        text-align: center;\
        font-size: 11px;\
        cursor: pointer;\
    }\
    .refresh-threads-view-more-button-link {\
        width: 100%;\
        height: 100%;\
        display: block;\
        padding: .5em;\
    }');});})();;;mw.loader.state({"wikia.fake.articles.ce9265233bc4cd885a92f5cffd04793a":"ready"});

/* cache key: jokebattles:resourceloader:filter:minify-js:7:f4002fc13d41c23576c0c6e745690193 */